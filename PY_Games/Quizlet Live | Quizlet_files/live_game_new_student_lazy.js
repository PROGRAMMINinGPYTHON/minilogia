(window.QJP=window.QJP||[]).push([["live_game_new_student_lazy","diagram_lazy"],{"0XI/":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r("Pxp3"),n=r("vjeg"),s=r("q1tI"),i=r.n(s);function o(e){var{mascotCode:t,mascotColor:r,mascotLang:s,ranking:o}=e;return i.a.createElement(a.a,{className:"RankingPill"},i.a.createElement("span",{className:"RankingPill-rank",style:{backgroundColor:r}},o),i.a.createElement("span",{className:"RankingPill-teamName"},Object(n.a)(t,s)))}},"3NTA":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("q1tI");function n(e){var t=Object(a.useRef)();return Object(a.useEffect)((()=>{t.current=e}),[e]),t.current}},"8d/s":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("JfAA"),r("UxlC");var a=r("TSYQ"),n=r.n(a),s=r("q1tI"),i=r.n(s);function o(e){var{activeIndex:t,children:r,disabled:a,onBlur:s,onFocus:o,paneWidth:c,width:l}=e,d={transform:"translateX("+((e,t)=>{if("number"==typeof e)return e*t;var r=parseInt(e,10);return""+t*r+e.replace(r.toString(),"")})(c||l,-t%i.a.Children.count(r))+")",transitionDuration:c?"500ms":void 0},m=c?void 0:{width:l},u=n()("Carousel",{"is-disabled":a});return i.a.createElement("div",{className:u,onBlur:s,onFocus:o,style:{width:l}},i.a.createElement("div",{className:"Carousel-panes",style:d},i.a.Children.map(r,((e,t)=>e?i.a.createElement("div",{className:"Carousel-pane",key:t,style:m},e):null))))}},"9BOR":function(e,t,r){"use strict";var a,n,s;r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return s})),function(e){e.DEFINITION_TO_WORD="definitionToWord",e.WORD_TO_DEFINITION="wordToDefinition",e.DEFINITION_TO_LOCATION="definitionToLocation",e.WORD_TO_LOCATION="wordToLocation"}(a||(a={})),function(e){e.DEFINITION="definition",e.WORD="word"}(n||(n={})),function(e){e.LEARNED_TERMS="learnedTerms",e.INCORRECT_TERMS="incorrectTerms",e.PERFECT_TERMS="perfectTerms"}(s||(s={}))},DdSR:function(e,t,r){"use strict";r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return m}));var a=r("peh1"),n=r("E52R"),s=r("yN8I"),i=r("/u/z"),o=Object(a.createSelector)(n.f,i.c,s.f),c=Object(a.createSelector)(o,s.d),l=(Object(a.createSelector)(o,s.b),Object(a.createSelector)(o,s.e)),d=Object(a.createSelector)(l,s.a),m=Object(a.createSelector)(o,s.c)},E537:function(e,t,r){"use strict";r.r(t);var a=r("/u/z"),n=r("ZHKH"),s=r("wrmd"),i=r("peh1"),o=r("E52R"),c=r("yN8I"),l=Object(i.createSelector)(o.f,a.c,s.e,((e,t,r)=>Object(c.f)(e,t,(e=>r&&e.get("name")===r.get("name"))))),d=Object(i.createSelector)(l,c.d),m=(Object(i.createSelector)(l,c.b),Object(i.createSelector)(l,c.e)),u=Object(i.createSelector)(m,c.a),p=Object(i.createSelector)(l,c.c),h=r("445u"),g=r("I9/n"),w=(r("yXV3"),r("4mDm"),r("B6y2"),r("3bBZ"),r("accy")),v=r("TSYQ"),S=r.n(v),f=r("t1Ez"),b=r("Pxp3"),I=r("bvRJ"),E=r("a08m"),T=r("og3H"),y=r("cytX"),A=r("0XI/"),O=r("NMQt"),N=r("z9pr"),C=r("vjeg"),_=r("q1tI"),x=r.n(_),k=r("axcl"),j=r.n(k),R=r("l6OD"),P=r("T3U7"),D=r("fdo3");class F extends x.a.PureComponent{constructor(){super(...arguments),this.state={shouldShowStats:!1,shouldShowConfetti:!1},this.getTeam=()=>{var{team:e,winningTeams:t}=this.props;return e||t[0]},this.handleExit=()=>{Object(D.a)("/latest")},this.handleShowStats=()=>{this.shouldRenderStats()&&(this.setState({shouldShowStats:!0}),Object(P.a)("qlive_next_action_learnt_screen"))}}componentDidMount(){this.props.actions.finishSession(),this.setState({shouldShowConfetti:!0})}getFirstPlaceTeam(){return this.props.winningTeams[0]}getCurrentRanking(){var{winningTeams:e}=this.props,t=this.getTeam(),r=e.find((e=>e.mascotCode===t.mascotCode)),a=r?e.indexOf(r):-1;return-1!==a?a+1:null}renderWinningMembers(){var{defaultAvatar:e,winningTeamMembers:t}=this.props;return x.a.createElement(b.a,{className:"StudentEndView-teamMembers"},Object.values(t).map((t=>x.a.createElement("div",{className:"StudentEndView-teamMember",key:"member-"+t.username},x.a.createElement(w.b,{imageURL:t.image||e,size:w.a.Large}),x.a.createElement(b.a,{className:"StudentEndView-teamMember--name"},t.username.toUpperCase())))))}renderRankingText(){var{mascotLang:e}=this.props,t=this.getTeam(),r=this.getCurrentRanking();return 1===r?x.a.createElement(x.a.Fragment,null,x.a.createElement(f.a,{id:"live_game.end_view.student.title_first_place"}),x.a.createElement("span",{className:"StudentEndView-teamName"},Object(C.a)(t.mascotCode,e))):r?x.a.createElement(f.a,{id:"live_game.end_view.student.title",place:r}):x.a.createElement(f.a,{id:"live_game.end_view.student.title_last_place"})}renderFirstPlaceHeader(){var e=this.getFirstPlaceTeam();return x.a.createElement(x.a.Fragment,null,x.a.createElement(b.a,{className:"StudentEndView-firstPlace"},x.a.createElement(A.a,{mascotCode:e.mascotCode,mascotColor:e.color,mascotLang:this.props.mascotLang,ranking:1}),this.renderWinningMembers()),x.a.createElement(b.a,{className:"StudentEndView-divider"}))}renderWinnerHeader(){return x.a.createElement(b.a,{className:"StudentEndView-winnerHeader"},x.a.createElement(j.a,{active:this.state.shouldShowConfetti,config:{spread:360,startVelocity:40,elementCount:Object(R.e)()?70:120,duration:5e3,colors:["#23b26d","#f08700","#c34632","#4257b2"]}}),x.a.createElement(f.a,{id:"live_game.end_view.student.header_for_winner"}))}renderRanking(){var{gameType:e}=this.props,t=this.getTeam(),{mascotCode:r,color:a}=t,n=S()("StudentEndView-ranking",{"should-show":!this.state.shouldShowStats});return x.a.createElement("div",{className:n},this.shouldShowAsWinner()?this.renderWinnerHeader():this.renderFirstPlaceHeader(),x.a.createElement(b.a,{className:"StudentEndView-congratsImage "+Object(N.a)(r),onClick:this.handleShowStats,style:{borderColor:a}}),x.a.createElement(b.a,{className:"StudentEndView-title"},this.renderRankingText()),this.shouldShowAsWinner()&&e===T.y.TEAM_MATCH?this.renderWinningMembers():null,this.shouldRenderStats()?x.a.createElement(b.a,{className:"StudentEndView-ranking--showStats"},x.a.createElement(E.a,{onClick:this.handleShowStats},x.a.createElement(f.a,{id:"live_game.end_view.student.show_stats_link"}),x.a.createElement(I.a,{icon:"chevron-down",size:"large"}))):null)}renderStats(){var e=S()("StudentEndView-stats",{"should-show":this.state.shouldShowStats});return x.a.createElement(b.a,{className:e},x.a.createElement(O.a,{isTeacher:!1}))}render(){var{isNativeApp:e,setTitle:t}=this.props;return x.a.createElement("div",{className:"StudentEndView"},e?null:x.a.createElement(y.a,{handleCloseButton:this.handleExit,setTitle:t,shouldShowInfo:!1,shouldShowOptions:!1}),x.a.createElement(b.a,{className:"StudentEndView-content"},this.renderRanking(),this.shouldRenderStats()?this.renderStats():null))}shouldShowAsWinner(){return this.props.team&&1===this.getCurrentRanking()}shouldRenderStats(){var{learnedTerms:e,perfectTerms:t,mostlyIncorrectTerms:r}=this.props;return Object.keys(e).length>0||Object.keys(t).length>0||Object.keys(r).length>0}}var M=r("Vg22"),V=r("pn57"),L=r("RPLW"),Q=r.n(L),W=Object(i.createStructuredSelector)({defaultAvatar:h.a,gameType:a.f,isNativeApp:h.d,learnedTerms:u,mascotLang:a.i,mostlyIncorrectTerms:p,perfectTerms:d,setTitle:n.e,team:s.e,winningTeamMembers:s.i,winningTeams:s.j});t.default=Object(M.connect)(W,(e=>({actions:Object(V.bindActionCreators)({finishSession:g.a},e)})))(Q()(F))},GHIf:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return m}));r("4mDm"),r("3bBZ");var a=r("TSYQ"),n=r.n(a),s=r("8d/s"),i=r("Pxp3"),o=r("WyAu"),c=r("9BOR"),l=r("q1tI"),d=r.n(l);class m extends d.a.Component{constructor(){super(...arguments),this.state={activeSectionIndex:0,prevActiveSectionIndex:0},this.handlePreviousGroup=()=>{this.setActiveSectionIndex(this.state.activeSectionIndex-1)},this.handleNextGroup=()=>{this.setActiveSectionIndex(this.state.activeSectionIndex+1)}}getSections(){var{isTeacher:t,learnedTerms:r,mostlyIncorrectTerms:a,perfectTerms:n}=this.props;return[{stats:r,headline:e(t?"live_game.end_view.sections.learned_terms.teacher_headline":"live_game.end_view.sections.learned_terms.student_headline"),sectionVariant:c.b.LEARNED_TERMS,subHeadline:e("live_game.end_view.sections.learned_terms.subheadline")},{stats:a,headline:e(t?"live_game.end_view.sections.mostly_incorrect_terms.teacher_headline":"live_game.end_view.sections.mostly_incorrect_terms.student_headline"),sectionVariant:c.b.INCORRECT_TERMS,subHeadline:e("live_game.end_view.sections.mostly_incorrect_terms.subheadline")},{stats:n,headline:e(t?"live_game.end_view.sections.perfect_terms.teacher_headline":"live_game.end_view.sections.perfect_terms.student_headline"),sectionVariant:c.b.PERFECT_TERMS}].filter((e=>Object.keys(e.stats).length))}getInitialIndex(e){return this.state.prevActiveSectionIndex<this.state.activeSectionIndex?0:Object.keys(e).length-1}render(){var e=this.getSections();return d.a.createElement(i.a,{className:"EndViewStats"},d.a.createElement(s.a,{activeIndex:this.state.activeSectionIndex,width:"100%"},e.map(((t,r)=>{var{stats:a,headline:s,sectionVariant:i,subHeadline:c}=t,l=this.state.activeSectionIndex===r,m=n()("EndViewStats-section",{"is-active":l}),u=this.getInitialIndex(a);return d.a.createElement("div",{className:m,key:r},d.a.createElement(o.a,{answerSide:this.props.answerSide,diagramImage:this.props.diagramImage,diagramShapesByTermId:this.props.diagramShapesByTermId,headline:s,initialIndex:u,isActive:l,isFirstGroup:0===r,isLastGroup:r===e.length-1,onNextGroup:this.handleNextGroup,onPreviousGroup:this.handlePreviousGroup,promptSide:this.props.promptSide,sectionVariant:i,stats:a,subHeadline:c}))}))))}setActiveSectionIndex(e){var t=this.getSections();e<0||e>=t.length||this.setState({activeSectionIndex:e,prevActiveSectionIndex:this.state.activeSectionIndex})}}}).call(this,r("nrsj").default)},NMQt:function(e,t,r){"use strict";var a=r("GHIf"),n=r("uAcY"),s=r("DdSR"),i=r("E52R"),o=r("Vg22"),c=r("peh1"),l=r("RPLW"),d=r.n(l),m=Object(c.createStructuredSelector)({answerSide:n.a,diagramImage:i.b,diagramShapesByTermId:i.d,learnedTerms:s.a,mostlyIncorrectTerms:s.b,perfectTerms:s.c,promptSide:n.l});t.a=Object(o.connect)(m)(d()(a.a))},Vixe:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return h}));var a=r("TSYQ"),n=r.n(a),s=r("tByv"),i=r("wDsb"),o=r("SZKz"),c=r("jjjR"),l=r("n9au"),d=r("q1tI"),m=r.n(d),u=e("live_game.student.game_board.answer.correct_answer",{emoji:"😀"}),p=e("live_game.student.game_board.answer.incorrect_answer",{emoji:"😕"});function h(e){var t,r=e.showAnswerFeedback||e.showCorrectAnswer;return m.a.createElement("div",{className:n()("DiagramView",{"DiagramView--correct":r&&!e.isIncorrectAnswer,"DiagramView--incorrect":r&&e.isIncorrectAnswer})},m.a.createElement(l.a,{languageCode:e.promptLang,promptSide:e.promptSide,term:e.term}),m.a.createElement("div",{className:"DiagramView-diagram"},r?m.a.createElement("div",{className:"DiagramView-feedback"},e.isIncorrectAnswer?p:u,e.isIncorrectAnswer?m.a.createElement(c.a,null):null):null,m.a.createElement(s.default,{image:null==(t=e.diagramImage)?void 0:t.toJS()},Array.from(e.answerOptionTermIds).map((t=>{var a=e.diagramShapesByTermId.get(t);if(!a)return null;var n=t===e.term.get("id"),s=t===e.lastAnswerTerm.get("id");return m.a.createElement(i.default,{diagramShape:a.toJS(),disabled:e.disabledTermsIds.has(t)||e.showAnswerFeedback&&!s||e.showCorrectAnswer&&!s&&!n,key:t,onClick:()=>e.handleSubmitAnswer(t),pulse:e.showAnswerFeedback&&!n&&s||e.showCorrectAnswer&&n,state:r&&s&&!n?o.e.INCORRECT:void 0})})))))}}).call(this,r("nrsj").default)},WyAu:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return m}));r("4mDm"),r("B6y2"),r("3bBZ");var a=r("8d/s"),n=r("JxFz"),s=r("bvRJ"),i=r("y93p"),o=r("q1tI"),c=r.n(o),l=r("xYJe"),d=r.n(l);class m extends o.Component{constructor(){super(...arguments),this.state={activeIndex:0,carouselDisabled:!1},this.handleSetStatIndex=(e,t)=>{var{stats:r}=this.props;this.isValidStatIndex(e)?(t&&t.preventDefault(),this.setState({activeIndex:e,carouselDisabled:!1})):-1===e?this.props.onPreviousGroup():e===Object.keys(r).length&&this.props.onNextGroup()},this.handleIncrStatIndex=(e,t)=>{this.handleSetStatIndex(this.state.activeIndex+e,t)},this.handleKeyDown=e=>{this.props.isActive&&(this.state.carouselDisabled&&0===this.state.activeIndex?this.setState({carouselDisabled:!1}):"ArrowLeft"===e.key?this.handleIncrStatIndex(-1,e):"ArrowRight"===e.key&&this.handleIncrStatIndex(1,e))}}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentDidUpdate(e){!e.isActive&&this.props.isActive&&"number"==typeof this.props.initialIndex&&this.setState({activeIndex:this.props.initialIndex,carouselDisabled:!0})}renderNavButtons(){var{stats:t}=this.props,r=!this.isValidStatIndex(this.state.activeIndex-1),a=!this.isValidStatIndex(this.state.activeIndex+1),i=Object.keys(t).length;return c.a.createElement("nav",{className:"TermStatGroup-nav"},c.a.createElement("div",{className:"TermStatGroup-navButtonPrev"},c.a.createElement(n.a,{"aria-label":e("live_game.navigation.back"),disabled:this.props.isFirstGroup&&r,onClick:e=>this.handleIncrStatIndex(-1,e),variant:"borderless"},c.a.createElement(s.a,{icon:"system-arrow-left",size:"medium"}))),c.a.createElement("div",{className:"TermStatGroup-navProgress"},this.state.activeIndex+1," / ",i),c.a.createElement("div",{className:"TermStatGroup-navButtonNext"},c.a.createElement(n.a,{"aria-label":e("live_game.navigation.forward"),disabled:this.props.isLastGroup&&a,onClick:e=>this.handleIncrStatIndex(1,e),variant:"borderless"},c.a.createElement(s.a,{icon:"system-arrow-right",size:"medium"}))))}renderStats(){var{stats:e,answerSide:t,diagramImage:r,diagramShapesByTermId:n,headline:s,promptSide:o,sectionVariant:l,subHeadline:m}=this.props,u=Object.values(e).map(((e,a)=>c.a.createElement("div",{className:"TermStatGroup-stat",key:a},c.a.createElement(i.a,{answerSide:t,diagramImage:r,diagramShapesByTermId:n,headline:s,promptSide:o,sectionVariant:l,subHeadline:m,termStats:e}))));return c.a.createElement("div",{className:"TermStatGroup-stats"},c.a.createElement(d.a,{onSwipedLeft:e=>this.handleIncrStatIndex(1,e),onSwipedRight:e=>this.handleIncrStatIndex(-1,e)},c.a.createElement(a.a,{activeIndex:this.state.activeIndex,disabled:this.state.carouselDisabled,width:"100%"},u)),this.renderNavButtons())}render(){return c.a.createElement("div",{className:"TermStatGroup"},this.renderStats())}isValidStatIndex(e){return e>=0&&e<Object.keys(this.props.stats).length}}}).call(this,r("nrsj").default)},"a/YJ":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.confetti=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign({},i,o(t)),c=r.elementCount,l=r.colors,d=r.width,m=r.height,u=r.perspective,p=r.angle,h=r.spread,g=r.startVelocity,w=r.decay,v=r.dragFriction,S=r.duration,f=r.stagger,b=r.random;e.style.perspective=u;var I=a(e,c,l,d,m),E=I.map((function(e){return{element:e,physics:n(p,h,g,b)}}));return s(e,E,v,w,S,f)};function a(e,t,r,a,n){return Array.from({length:t}).map((function(t,s){var i=document.createElement("div"),o=r[s%r.length];return i.style["background-color"]=o,i.style.width=a,i.style.height=n,i.style.position="absolute",i.style.willChange="transform, opacity",i.style.visibility="hidden",e.appendChild(i),i}))}function n(e,t,r,a){var n=e*(Math.PI/180),s=t*(Math.PI/180);return{x:0,y:0,z:0,wobble:10*a(),wobbleSpeed:.1+.1*a(),velocity:.5*r+a()*r,angle2D:-n+(.5*s-a()*s),angle3D:-Math.PI/4+a()*(Math.PI/2),tiltAngle:a()*Math.PI,tiltAngleSpeed:.1+.3*a()}}function s(e,t,r,a,n,s){var i=void 0;return new Promise((function(o){requestAnimationFrame((function c(l){i||(i=l);var d=l-i,m=i===l?0:(l-i)/n;t.slice(0,Math.ceil(d/s)).forEach((function(e){!function(e,t,r,a){e.physics.x+=Math.cos(e.physics.angle2D)*e.physics.velocity,e.physics.y+=Math.sin(e.physics.angle2D)*e.physics.velocity,e.physics.z+=Math.sin(e.physics.angle3D)*e.physics.velocity,e.physics.wobble+=e.physics.wobbleSpeed,a?e.physics.velocity*=a:e.physics.velocity-=e.physics.velocity*r,e.physics.y+=3,e.physics.tiltAngle+=e.physics.tiltAngleSpeed;var n=e.physics,s=n.x,i=n.y,o=n.z,c=n.tiltAngle,l=n.wobble,d="translate3d("+(s+10*Math.cos(l))+"px, "+(i+10*Math.sin(l))+"px, "+o+"px) rotate3d(1, 1, 1, "+c+"rad)";e.element.style.visibility="visible",e.element.style.transform=d,e.element.style.opacity=1-t}(e,m,r,a)})),l-i<n?requestAnimationFrame(c):(t.forEach((function(t){if(t.element.parentNode===e)return e.removeChild(t.element)})),o())}))}))}var i={angle:90,spread:45,startVelocity:45,elementCount:50,width:"10px",height:"10px",perspective:"",colors:["#a864fd","#29cdff","#78ff44","#ff718d","#fdff6a"],duration:3e3,stagger:0,dragFriction:.1,random:Math.random};function o(e){return!e.stagger&&e.delay&&(e.stagger=e.delay),e}},a8te:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var a=r("pVnL"),n=r.n(a),s=r("8OQS"),i=r.n(s),o=r("TSYQ"),c=r.n(o),l=r("25Tj"),d=r("og3H"),m=r("9WHe"),u=r("JPcv"),p=r("q1tI"),h=r.n(p),g=r("kBL2");function w(e,t){switch(t){case d.Qb.WORD:return e.word;case d.Qb.DEFINITION:return e.definition;default:throw m.a.error("Unknown TermSide value with Redux History",{reduxHistory:g.a.getHistory(["assistant.currentAssistantStep.question.questionType","assistant.currentQuestionState","assistant.previousAssistantStep.question.questionType"])}),new Error("Unknown TermSide value: "+t)}}class v extends p.Component{shouldComponentUpdate(e){return e.term&&e.term.id===this.props.term.id&&e.side!==d.Qb.LOCATION}getRichText(){var e,{side:t,term:r}=this.props;return t===d.Qb.WORD?e=r.wordRichText:t===d.Qb.DEFINITION&&(e=r.definitionRichText),u.Map.isMap(e)&&(e=e?e.toJS():null),e}render(){var e=this.props,{className:t}=e,r=i()(e,["className"]);return h.a.createElement(l.a,n()({className:c()("TermText",t)},r,{richText:this.getRichText(),text:w(this.props.term,this.props.side)}))}}},axcl:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=r("q1tI"),i=(a=s)&&a.__esModule?a:{default:a},o=r("a/YJ");var c={position:"relative"},l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.setRef=r.setRef.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidUpdate",value:function(e){!e.active&&this.props.active&&(0,o.confetti)(this.container,this.props.config)}},{key:"setRef",value:function(e){this.container=e}},{key:"render",value:function(){return i.default.createElement("div",{className:this.props.className,style:c,ref:this.setRef})}}]),t}(s.Component);t.default=l},ewga:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return l}));var a=r("nXOR"),n=r("dxfC"),s=r("tByv"),i=r("wDsb"),o=r("q1tI"),c=r.n(o);class l extends o.PureComponent{constructor(e){super(e),this.handleCloseModal=e=>{e.stopPropagation(),this.setState({isPreviewOpen:!1})},this.handleOpenModal=e=>{e.originalEvent.stopPropagation(),this.setState({isPreviewOpen:!0})},this.state={isPreviewOpen:!1}}renderDiagram(){return c.a.createElement(s.default,{dragging:!0,image:this.props.image,onClick:this.handleOpenModal,zoomControl:!0},c.a.createElement(i.default,{diagramShape:this.props.diagramShape}))}renderDiagramThumbnail(){return c.a.createElement(a.a,{above:"s"},(e=>c.a.createElement(s.default,{dragging:!1,image:this.props.image,onClick:e?this.handleOpenModal:null,variant:"ZOOM_TO_POINTS_VARIANT",zoomControl:!1},c.a.createElement(i.default,{diagramShape:this.props.diagramShape}))))}renderModal(){return c.a.createElement(n.a,{fullWidthBody:!0,includeCloseButton:!1,includeOverlay:!0,isOpen:this.state.isPreviewOpen,onClose:this.handleCloseModal},c.a.createElement("div",{className:"DiagramPreview-modalContainer"},this.renderDiagram()))}render(){return c.a.createElement("div",{className:"DiagramPreview"},c.a.createElement(a.a,{above:"s"},(e=>e?this.renderModal():c.a.createElement("noscript",null))),this.renderDiagramThumbnail())}}},f7hR:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return u}));var a=r("TSYQ"),n=r.n(a),s=r("25Tj"),i=r("lX3T"),o=r("t1Ez"),c=r("gOFt"),l=r("q1tI"),d=r.n(l);function m(t){var{isCorrect:r,languageCode:a,lastAnswerer:l,playerId:m,side:u,term:p}=t,{text:h,richText:g}=Object(c.a)(p,u),w=p.get("_imageUrl"),v=l.get("id")===m?d.a.createElement(o.a,{id:"live_game.student.game_board.feedback.incorrect_heading"}):d.a.createElement(o.a,{id:"live_game.student.game_board.feedback.incorrect_heading_teammate"});return d.a.createElement("section",{className:n()("StudentIncorrectAnswerFeedback-section",{"StudentIncorrectAnswerFeedback-section--correct":r,"StudentIncorrectAnswerFeedback-section--incorrect":!r})},d.a.createElement("h3",{className:"StudentIncorrectAnswerFeedback-heading"},r?e("live_game.student.game_board.feedback.correct_heading"):v),d.a.createElement("div",{className:"StudentIncorrectAnswerFeedback-content"},w?d.a.createElement("div",{className:"StudentIncorrectAnswerFeedback-image"},d.a.createElement(i.a,{clickToZoom:!1,shape:"contain",src:w})):null,h||g?d.a.createElement("div",{className:"StudentIncorrectAnswerFeedback-text"},d.a.createElement(s.a,{className:"StudentPrompt-text",lang:a,richText:g,text:null!=h?h:"",textfit:{min:14,max:20}})):null))}function u(e){var{answerSide:t,correctAnswerTerm:r,lastAnswerer:a,lastAnswerTerm:n,languageCode:s,playerId:i}=e;return d.a.createElement("div",{className:"StudentIncorrectAnswerFeedback"},d.a.createElement(m,{isCorrect:!1,languageCode:s,lastAnswerer:a,playerId:i,side:t,term:n}),d.a.createElement(m,{isCorrect:!0,languageCode:s,lastAnswerer:a,playerId:i,side:t,term:r}))}}).call(this,r("nrsj").default)},gOFt:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("og3H");function n(e,t){var r,n;switch(t){case a.Qb.WORD:return{text:e.get("word"),richText:null==(r=e.get("wordRichText"))?void 0:r.toJS()};case a.Qb.DEFINITION:return{text:e.get("definition"),richText:null==(n=e.get("definitionRichText"))?void 0:n.toJS()};default:return{text:null,richText:null}}}},jjjR:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r("nXOR"),n=r("q1tI"),s=r.n(n);function i(){return s.a.createElement("div",{className:"StudentGameboardCountDown"},s.a.createElement("div",{className:"StudentGameboardCountDown-three"},"3"),s.a.createElement("div",{className:"StudentGameboardCountDown-two"},"2"),s.a.createElement("div",{className:"StudentGameboardCountDown-one"},"1"),s.a.createElement(a.a,{below:"m"},(e=>s.a.createElement("svg",{className:"StudentGameboardCountDown-resetCircle"},s.a.createElement("circle",{cx:"20",cy:"20",r:e?"15":"18"}),s.a.createElement("circle",{cx:"20",cy:"20",r:e?"15":"18"})))))}},n9au:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var a=r("TSYQ"),n=r.n(a),s=r("25Tj"),i=r("lX3T"),o=r("og3H"),c=r("gOFt"),l=r("X0lI"),d=r.n(l),m=r("q1tI"),u=r.n(m),p=r("l6OD");function h(e){var{languageCode:t,promptSide:r,term:a}=e,{text:l,richText:m}=Object(c.a)(a,r),h=Object(p.h)()?{max:34,min:18}:{max:64,min:22},g=a.get("_imageUrl"),w=!!g&&r===o.Qb.DEFINITION;return u.a.createElement("div",{className:n()("StudentPrompt",{"has-image":w,"has-text":!!l})},w?u.a.createElement("div",{"aria-hidden":!0,className:"StudentPrompt-image",role:"img"},u.a.createElement(i.a,{clickToZoom:!1,shape:"contain",src:d()(g)})):null,l?u.a.createElement(s.a,{className:"StudentPrompt-text",lang:t,richText:m,text:l,textfit:h}):null)}},wo0u:function(e,t,r){"use strict";r.r(t);var a=r("/u/z"),n=r("uAcY"),s=r("hQQp"),i=r("ZHKH"),o=r("wrmd"),c=r("E52R"),l=r("hibm"),d=r("Y7o6"),m=r("I9/n"),u=r("+P0L"),p=r("bPHd"),h=r("G87+"),g=r("A8mX"),w=r("nqhS"),v=(r("4mDm"),r("3bBZ"),r("TSYQ")),S=r.n(v),f=r("t1Ez"),b=r("og3H"),I=r("3NTA"),E=r("Vixe"),T=r("25Tj"),y=r("lX3T"),A=r("Uudg"),O=r("JxFz"),N=r("bvRJ"),C=r("gOFt"),_=r("q1tI"),x=r.n(_),k=r("l6OD");function j(e){var{answerSide:t,languageCode:r,onSubmitAnswer:a,previousCorrectAnswer:n,showFeedback:s,showingCorrectFeedback:i,term:o}=e,{text:c,richText:l}=Object(C.a)(o,t),d=Object(k.g)()?{max:18,min:14}:{max:22,min:14},m=o.get("_imageUrl"),u=!!m&&t===b.Qb.DEFINITION,p=S()("StudentAnswerOption",{"is-showingAnswerFeedback":s,"is-showingCorrectFeedback":s&&i,"is-previousCorrectAnswer":n&&!i,"is-showingIncorrectFeedback":s&&!i,"has-image":!s&&u,"has-text":!s&&!!c});return x.a.createElement("span",{className:p},!i&&n?x.a.createElement(N.a,{className:"StudentAnswerOption-checkmark",icon:"check"}):x.a.createElement(O.a,{disabled:s,onClick:()=>{a(o.get("id"))},variant:"whiteBorderless"},s?i?x.a.createElement(A.a,{emoji:"😀",id:"live_game.student.game_board.answer.correct_answer"}):x.a.createElement(A.a,{emoji:"😕",id:"live_game.student.game_board.answer.incorrect_answer"}):x.a.createElement(x.a.Fragment,null,u?x.a.createElement("div",{"aria-hidden":!0,className:"StudentAnswerOption-image",role:"img"},x.a.createElement(y.a,{clickToZoom:!1,shape:"contain",src:m})):null,c?x.a.createElement(T.a,{className:"StudentAnswerOption-text",lang:r,richText:l,text:c,textfit:d}):null)))}function R(e){var{answerSide:t,answers:r,gameType:a,isIncorrectAnswer:n,languageCode:s,lastAnswerTermId:i,onSubmitAnswer:o,showAnswerFeedback:c,terms:l}=e;return x.a.createElement("div",{className:"StudentAnswerOptions"},l.map((e=>{var l=c&&e.get("id")===i,d=l&&!n,m=!1;if(!l&&a!==b.y.INDIVIDUAL_COMPETITION){var u=r.find((t=>t&&t.get("termId")===e.get("id")));m=!!u&&u.count()>0}return x.a.createElement("div",{className:"StudentAnswerOptions-optionCard",key:e.get("id")},x.a.createElement(j,{answerSide:t,languageCode:s,onSubmitAnswer:o,previousCorrectAnswer:m,showFeedback:l,showingCorrectFeedback:d,term:e}))})))}var P=r("f7hR"),D=r("n9au");function F(e){var t=new Set(e.streak.get("terms").get(e.playerId)),r=e.terms.filter((e=>t.has(e.get("id")))).toArray();return x.a.createElement("div",{className:"QuestionView"},x.a.createElement(D.a,{languageCode:e.promptLang,promptSide:e.promptSide,term:e.prompt}),e.isIncorrectAnswer&&e.showCorrectAnswer?x.a.createElement(P.a,{answerSide:e.answerSide,correctAnswerTerm:e.lastPrompt,languageCode:e.answerLang,lastAnswerer:e.lastAnswerer,lastAnswerTerm:e.lastAnswerTerm,playerId:e.playerId}):x.a.createElement(R,{answers:e.streak.get("answers"),answerSide:e.answerSide,gameType:e.gameType,isIncorrectAnswer:e.isIncorrectAnswer,languageCode:e.answerLang,lastAnswerTermId:e.lastAnswerTerm.get("id"),onSubmitAnswer:e.handleSubmitAnswer,showAnswerFeedback:e.showAnswerFeedback,terms:r}))}var M=r("jjjR"),V=r("peh1"),L=Object(V.createSelector)(o.g,(e=>{if(!e)return[];var t=e.getIn([0,"streaks",0,"prompts"]),r=t?t.count():0;return e.map((e=>{var t=e.get("mascotCode"),a=e.get("color");return{answerCount:0===r?0:e.get("streaks").last().get("answers").count((e=>e.get("isCorrect"))),color:a,mascot:t,promptCount:r}})).toJS()})),Q=r("z9pr"),W=r("Vg22");function B(e){var{team:t}=e,r=100*t.answerCount/(t.promptCount||12);return _.createElement("div",{className:"StudentLeaderboard-team",style:{width:r+"%",zIndex:Math.floor(100-r)}},_.createElement("span",{className:"StudentLeaderboard-image "+Object(Q.a)(t.mascot),style:{borderColor:t.color}}))}function H(){var e=Object(W.useSelector)(L);return _.createElement("div",{className:"StudentLeaderboard"},_.createElement("div",{className:"StudentLeaderboard-headstart"}),_.createElement("div",{className:"StudentLeaderboard-teamList"},e.map((e=>_.createElement(B,{key:e.mascot,team:e})))))}function G(e){var{isIncorrectAnswer:t,lastAnswerer:r,showCorrectAnswerFeedback:a}=e,n=S()("StudentGameboard-feedback",{"is-incorrectAnswer":t});return x.a.createElement("div",{className:n},a&&!t?x.a.createElement(f.a,{answererName:r.get("username"),emoji:"😃",id:"live_game.student.game_board.answer.correct_answer_from_teammate"}):x.a.createElement(x.a.Fragment,null,x.a.createElement(f.a,{emoji:"😕",id:"live_game.student.game_board.answer.incorrect_answer"}),x.a.createElement(M.a,null)))}function z(e){var{answerSide:t,currentRound:r,currentStreakNum:a,diagramImage:n,diagramShapesByTermId:s,gameType:i,isIncorrectAnswer:o,lastAnswerer:c,lastAnswerTerm:l,lastPrompt:d,onSubmitAnswer:m,playerId:u,prompt:p,promptSide:h,set:g,streak:w,terms:v}=e,[S,f]=h===b.Qb.WORD?[g.get("wordLang"),g.get("defLang")]:[g.get("defLang"),g.get("defLang")],T=new Set(w.get("terms").get(u)),y=Object(I.a)(T),A=new Set(i===b.y.INDIVIDUAL_COMPETITION?[]:w.get("answers").filter((e=>e.get("isCorrect"))).map((e=>e.get("termId"))).toJS()),O=Object(I.a)(r),N=Object(I.a)(a),C=Object(I.a)(o),[k,j]=Object(_.useState)(!1),[R,P]=Object(_.useState)(!1);Object(_.useEffect)((()=>{var e;return!C&&o&&(j(!0),e=window.setTimeout((()=>{j(!1),P(!0)}),1e3)),void 0!==N&&N<a&&R&&P(!1),void 0!==O&&O<r&&!o&&(j(!0),e=window.setTimeout((()=>{j(!1)}),2e3)),function(){e&&O===r&&clearTimeout(e)}}),[r,O,o,C,R,N,a]);var D=e=>{m({round:r,streak:a,termId:e})},M=t===b.Qb.LOCATION,V=k&&!o&&c.get("id")!==u;return x.a.createElement("div",{className:"StudentGameboard"},M||!V&&!R?x.a.createElement(H,null):x.a.createElement(G,{isIncorrectAnswer:o,lastAnswerer:c,showCorrectAnswerFeedback:V}),M?x.a.createElement(E.a,{answerOptionTermIds:(k||R)&&y?y:T,diagramImage:n,diagramShapesByTermId:s,disabledTermsIds:A,handleSubmitAnswer:D,isIncorrectAnswer:o,lastAnswerTerm:l,promptLang:S,promptSide:h,showAnswerFeedback:k,showCorrectAnswer:R,term:k||R?d:p}):x.a.createElement(F,{answerLang:f,answerSide:t,gameType:i,handleSubmitAnswer:D,isIncorrectAnswer:o,lastAnswerer:c,lastAnswerTerm:l,lastPrompt:d,playerId:u,prompt:k||R?d:p,promptLang:S,promptSide:h,set:g,showAnswerFeedback:k,showCorrectAnswer:R,streak:w,terms:v}))}var J=r("/LOw"),q=r("4IVF");function U(e){var{progress:t,teamName:r}=e;return x.a.createElement("div",{className:"StudentPlayingHeader"},x.a.createElement(q.a,null),x.a.createElement("span",{className:"StudentPlayingHeader-teamName"},r),x.a.createElement("span",{className:"StudentPlayingHeader-progress"},t.current,"/",t.total))}var Y=r("vjeg");function X(e){var t={current:e.currentCorrectAnswerCount,total:e.streak.get("prompts").count()};return x.a.createElement(J.a,{header:x.a.createElement(U,{progress:t,teamName:Object(Y.a)(e.team.get("name"),e.mascotLang)})},e.streak?x.a.createElement(z,e):null)}var Z=r("pn57");class K extends x.a.Component{componentDidMount(){this.props.actions.initializeSession(this.props.playerId)}renderView(){return this.shouldRenderBlockerView()?x.a.createElement(w.a,null):this.shouldRenderPausedGameView()?x.a.createElement(g.a,this.props):x.a.createElement(X,{answerSide:this.props.answerSide,currentCorrectAnswerCount:this.props.currentCorrectAnswerCount,currentRound:this.props.currentRoundNum,currentStreakNum:this.props.currentStreakNum,diagramImage:this.props.diagramImage,diagramShapesByTermId:this.props.diagramShapesByTermId,gameType:this.props.gameState.get("type"),isFirstPrompt:this.props.isFirstPrompt,isIncorrectAnswer:this.props.isIncorrectAnswer,isTermAudioTurnedOn:this.props.isTermAudioTurnedOn,lastAnswerer:this.props.lastAnswerer,lastAnswerTerm:this.props.lastAnswerTerm,lastPrompt:this.props.lastPrompt,logQuestionEnd:this.props.actions.logQuestionEnd,logQuestionStart:this.props.actions.logQuestionStart,logViewCorrectAnswer:this.props.actions.logViewCorrectAnswer,mascotLang:this.props.mascotLang,onSubmitAnswer:this.props.actions.submitAnswer,onToggleAudio:this.props.actions.toggleAudioUrl,playerId:this.props.playerId,players:this.props.gameState.get("players"),prompt:this.props.isIncorrectAnswer?this.props.lastPrompt:this.props.currentPrompt,promptSide:this.props.promptSide,set:this.props.set,streak:this.props.currentStreak,team:this.props.team,terms:this.props.terms})}render(){return x.a.createElement(x.a.Fragment,null,this.renderView(),x.a.createElement(h.a,{isPlaying:!0}))}shouldRenderBlockerView(){return!this.props.player}shouldRenderPausedGameView(){return!this.props.isConnected}}var $=Object(V.createStructuredSelector)({answerSide:n.a,currentCorrectAnswerCount:n.b,currentPrompt:n.c,currentRoundNum:n.d,currentStreak:n.e,currentStreakNum:n.f,diagramImage:c.b,diagramShapesByTermId:c.d,disconnectedTeamMembers:o.d,gameCode:a.a,gameState:a.c,gameStatus:a.d,isConnected:l.a,isFirstPrompt:n.g,isIncorrectAnswer:n.h,isTermAudioTurnedOn:a.h,lastAnswerTerm:n.i,lastAnswerer:n.j,lastPrompt:n.k,player:s.b,playerId:s.d,promptSide:n.l,mascotLang:a.i,set:i.c,studentUrl:d.a,team:o.e,teamMembers:o.f,terms:c.f});t.default=Object(W.connect)($,(e=>({actions:Object(Z.bindActionCreators)({initializeSession:m.c,logQuestionStart:u.c,logQuestionEnd:u.b,logViewCorrectAnswer:u.d,submitAnswer:p.b,toggleAudioUrl:m.j},e)})))(K)},y93p:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));r("+2oP");var a=r("TSYQ"),n=r.n(a),s=r("a8te"),i=r("Pxp3"),o=r("og3H"),c=r("ewga"),l=r("q1tI"),d=r.n(l),m=r("/En6");class u extends d.a.Component{renderConfusedWith(){var{termStats:e}=this.props,t=e.confusedWith.map(((e,t)=>this.renderTerm(e,"TermStat-confusedTerm",t))).slice(0,1);return void 0!==this.props.subHeadline?d.a.createElement(d.a.Fragment,null,d.a.createElement(i.a,{className:"TermStat-separator",key:"separator"}),d.a.createElement(i.a,{className:"TermStat-subHeader"},this.props.subHeadline),t):null}renderTerm(e,t,r){return d.a.createElement(i.a,{className:t,key:r},this.shouldRenderSide(o.Qb.WORD,e)?d.a.createElement(i.a,{className:"TermStat-word"},d.a.createElement(s.a,{lang:"en",side:o.Qb.WORD,term:e})):null,this.shouldRenderSide(o.Qb.DEFINITION,e)?d.a.createElement(i.a,{className:"TermStat-definition"},d.a.createElement(s.a,{lang:"en",side:o.Qb.DEFINITION,term:e})):null,this.shouldRenderImage(e)&&!this.shouldRenderDiagram(e)?this.renderImage(e):null,this.shouldRenderDiagram(e)?this.renderDiagram(e):null)}renderImage(e){return e._imageUrl?d.a.createElement(i.a,{className:"TermStat-image"},d.a.createElement("img",{"aria-label":e.word,src:Object(m.d)(e._imageUrl)})):null}renderDiagram(e){var{diagramImage:t,diagramShapesByTermId:r}=this.props;if(null==t||null==r)return null;var a=r[e.id];return void 0===a?null:d.a.createElement(i.a,{className:"TermStat-diagramWrap"},d.a.createElement(c.default,{diagramShape:a,image:t}))}render(){var e=n()("TermStat","TermStat--"+this.props.sectionVariant),{term:t}=this.props.termStats;return d.a.createElement("div",{className:e},d.a.createElement(i.a,{className:"TermStat-header"},this.props.headline),d.a.createElement(i.a,{className:"TermStat-content"},this.renderTerm(t,"TermStat-primaryTerm",0),this.shouldRenderConfusedWith()?this.renderConfusedWith():null))}shouldRenderConfusedWith(){var{termStats:e}=this.props;return e.confusedWith.length>0}shouldRenderImage(e){return!!e._imageUrl}shouldRenderDiagram(e){var{diagramImage:t,diagramShapesByTermId:r}=this.props;return null!=t&&null!=r&&void 0!==r[e.id]}shouldRenderSide(e,t){return(e!==o.Qb.DEFINITION||""!==t.definition)&&(this.props.promptSide===e||this.props.answerSide===e)}}},yN8I:function(e,t,r){"use strict";r.d(t,"f",(function(){return n})),r.d(t,"d",(function(){return s})),r.d(t,"b",(function(){return i})),r.d(t,"e",(function(){return o})),r.d(t,"a",(function(){return c})),r.d(t,"c",(function(){return l}));r("E9XD"),r("Junv"),r("ToJy"),r("FZtP");var a=r("JPcv"),n=function(e,t,r){void 0===r&&(r=()=>!0);var n=Object(a.Map)();return e.forEach((e=>{n=n.set(e.get("id"),Object(a.Map)({term:e,numCorrect:0,numIncorrect:0,numPrompted:0,teamsAppearances:Object(a.Map)(),confusedWith:Object(a.List)()}))})),t.get("teams").filter(r).forEach((e=>{e.get("streaks").forEach((t=>{var r=t.get("answers").count();Object(a.Range)(0,r).forEach((r=>{var s=t.get("prompts").get(r),i=t.get("answers").get(r);n=i.get("isCorrect")?n.update(s,(t=>t.merge(Object(a.fromJS)({numCorrect:t.get("numCorrect")+1,numPrompted:t.get("numPrompted")+1,teamsAppearances:t.get("teamsAppearances").update(e.get("name"),(e=>{var t=Object(a.Map)({promptId:s,answer:i});return e?e.push(t):Object(a.List)([t])}))})))):(n=n.update(s,(t=>t.merge(Object(a.fromJS)({numIncorrect:t.get("numIncorrect")+1,numPrompted:t.get("numPrompted")+1,teamsAppearances:t.get("teamsAppearances").update(e.get("name"),(e=>{var t=Object(a.Map)({promptId:s,answer:i});return e?e.push(t):Object(a.List)([t])})),confusedWith:t.get("confusedWith").push(i.get("termId"))}))))).update(i.get("termId"),(t=>t.merge(Object(a.fromJS)({numIncorrect:t.get("numIncorrect")+1,numPrompted:t.get("numPrompted")+1,teamsAppearances:t.get("teamsAppearances").update(e.get("name"),(e=>{var t=Object(a.Map)({promptId:s,answer:i});return e?e.push(t):Object(a.List)([t])})),confusedWith:t.get("confusedWith").push(s)}))))}))}))})),n=n.map((t=>t.update("confusedWith",(t=>t.countBy((e=>e)).sort().reverse().take(2).keySeq().map((t=>e.find((e=>e.get("id")===t))))))))},s=e=>e.filter((e=>0===e.get("numIncorrect")&&e.get("numCorrect")>0)),i=e=>e.filter((e=>e.get("numIncorrect")<e.get("numCorrect"))),o=e=>e.filter((e=>e.get("numCorrect")/e.get("numPrompted")>1/3&&e.get("numIncorrect")>0)),c=e=>e.filter((e=>e.get("teamsAppearances").every((e=>null!==e.reduce(((e,t)=>null===e||e&&!t.getIn(["answer","isCorrect"])?null:t.getIn(["answer","isCorrect"])),!1))))),l=e=>e.filter((e=>e.get("numIncorrect")>e.get("numCorrect")))},z9pr:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("UxlC");var a=e=>"u-"+(e=>e.replace("-",""))(e)+"CircleBackground"}}]);